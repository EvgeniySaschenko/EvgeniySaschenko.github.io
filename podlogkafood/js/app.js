"use strict";(function(){document.addEventListener("ajax:production",function(){for(var t=void 0,e=void 0,n=void 0,o=void 0,r=void 0,a=void 0,c=void 0,i=document.querySelectorAll(".buy .form__row_product"),s=function(s){s.addEventListener("change",function(){for(var s=[],l=0;i.length>l;l++)t=i[l].querySelector(".form__select_color").value,n=i[l].querySelector(".form__field_count").value,e=i[l].querySelector(".form__size").getAttribute("data-size"),r=i[l].querySelector(".form__square").getAttribute("data-square"),a=i[l].getAttribute("data-shape"),c=i[l].getAttribute("data-shape-icon"),o=n>=3e3?i[l].querySelector(".form__price_1").getAttribute("data-price"):i[l].querySelector(".form__price_2").getAttribute("data-price"),n>0&&s.push({color:t,count:n,size:e,square:r,price:o,shape:a,shapeIcon:c});document.getElementById("header__icon_cart-counter").innerText=s.length;for(var d=document.getElementById("formCartList"),u=[],m=0,_=0;s.length>_;_++)m+=parseFloat((s[_].count*s[_].price).toFixed(2)),u.push('<div class="form__row form__row_product">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="form__size">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'+s[_].size+'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" name="size[]" value="'+s[_].size+'">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="form__color"> \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'+s[_].color+'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" name="color[]" value="'+s[_].color+'">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="form__shape"> \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="form__text">'+s[_].shape+'</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="form__icon '+s[_].shapeIcon+'" title="'+s[_].shape+'"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" name="shape[]" value="'+s[_].shape+'">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="form__price">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'+s[_].price+'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" name="price[]" value="'+s[_].price+'">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="form__square">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'+s[_].square+'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" name="square[]" value="'+s[_].square+'">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="form__count">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'+s[_].count+'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" name="count[]" value="'+s[_].count+'">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="form__sum">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'+(s[_].count*s[_].price).toFixed(2)+'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" name="sum[]" value="'+(s[_].count*s[_].price).toFixed(2)+'">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>');u.push('<div class="form__row form__row_product">\n\t\t\t\t\t\t<div class="form__total-sum-text">\n\t\t\t\t\t\t\tОбщая сумма:\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="form__total-sum">\n\t\t\t\t\t\t\t'+m.toFixed(2)+'\n\t\t\t\t\t\t\t<input type="hidden" name="sum_total" value="'+m.toFixed(2)+'">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>'),d.innerHTML=u.join("")})},l=0;i.length>l;l++){var d=i[l].querySelector(".form__select_color"),u=i[l].querySelector(".form__field_count");s(d),s(u)}});for(var t=document.getElementsByClassName("call-modal-cart"),e=0;t.length>e;e++)t[e].addEventListener("click",function(t){document.getElementById("cart").classList.add("active")});document.querySelector(".cart__close").addEventListener("click",function(t){document.getElementById("cart").classList.remove("active")})}).call(),function(){var t=function(t,e,n){var o=n||function(){},r=new XMLHttpRequest;r.open("POST",t,!0),r.send(e),r.onreadystatechange=function(){4==r.readyState&&200==r.status&&""!=r.responseText&&o(JSON.parse(r.responseText))}};t("http://podlogkafood.ua-ix.biz/server/production.php","",function(t){for(var e=[],n=[],o=[],r=[],a=function(t,e,n,o,r,a,c){return'<div class="form__row form__row_product" data-shape="'+a+'" data-shape-icon="'+c+'">\n\t\t\t\t<div class="form__size" data-size="'+t+'">\n\t\t\t\t\t'+t+'\n\t\t\t\t</div>\n\t\t\t\t<div class="form__color"> \n\t\t\t\t\t'+(1==r?'<select class="form__select form__select_color" name="color">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option class="form__option" value="Белый">Белый\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t\t</select>':'<select class="form__select form__select_color" name="color">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option class="form__option" value="Золото / Серебро">Золото / Серебро\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option class="form__option" value="Золото / Золото">Золото / Золото\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option class="form__option" value="Серебро / Серебро">Серебро / Серебро\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t\t</select>')+'\n\t\t\t\t</div>\n\t\t\t\t<div class="form__price form__price_1" data-price="'+e+'">\n\t\t\t\t\t'+e+'\n\t\t\t\t</div>\n\t\t\t\t<div class="form__price form__price_2" data-price="'+n+'">\n\t\t\t\t\t'+n+'\n\t\t\t\t</div>\n\t\t\t\t<div class="form__square" data-square="'+o+'">\n\t\t\t\t\t'+o+'\n\t\t\t\t</div>\n\t\t\t\t<div class="form__count"><input type="text" pattern="^[0-9]+$" class="form__field form__field_count" name="count" placeholder="0" type="text"/>\n\t\t\t\t</div>\n\t\t\t\t<div class="form__sum">\n\t\t\t\t\t0.00\n\t\t\t\t</div>\n\t\t\t</div>'},c=0;t.length>c;c++)0!=t[c].diameter?(e.push(a(t[c].diameter,t[c].price_layer_1,t[c].price_layer_1_3000,t[c].square,1,"Круглая","glyphicon glyphicon-record")),n.push(a(t[c].diameter,t[c].price_layer_2,t[c].price_layer_2_3000,t[c].square,2,"Круглая","glyphicon glyphicon-record"))):(o.push(a(t[c].dimensions,t[c].price_layer_1,t[c].price_layer_1_3000,t[c].square,1,"Прямоугольная","glyphicon glyphicon-stop")),r.push(a(t[c].dimensions,t[c].price_layer_2,t[c].price_layer_2_3000,t[c].square,2,"Прямоугольная","glyphicon glyphicon-stop")));document.getElementById("formBuyCircleListLayer1").innerHTML=e.join(""),document.getElementById("formBuyCircleListLayer2").innerHTML=n.join(""),document.getElementById("formBuySquareListLayer1").innerHTML=o.join(""),document.getElementById("formBuySquareListLayer2").innerHTML=r.join("");for(var i=document.querySelectorAll(".form__row_product"),s=function(t){var e=i[t].querySelector(".form__field_count"),n=i[t].querySelector(".form__sum"),o=i[t].querySelector(".form__price_1").getAttribute("data-price"),r=i[t].querySelector(".form__price_2").getAttribute("data-price");e.addEventListener("change",function(){e.value=isNaN(e.value)||""==e.value?0:parseInt(e.value),e.value>=3e3?n.innerText=Number(e.value*o).toFixed(2):n.innerText=(e.value*r).toFixed(2)})},l=0;i.length>l;l++)s(l);var d=new Event("ajax:production");document.dispatchEvent(d)}),document.querySelector("#formCart .btn_cart").addEventListener("click",function(e){e.preventDefault();for(var n=document.querySelectorAll("#formCart .notice"),o=0;n.length>o;o++)n[o].classList.remove("active");for(var r=document.getElementById("formCart"),a=new FormData(r),c=document.querySelectorAll('#formCart [required="required"]'),i=!0,s=0;c.length>s;s++)if("mail"==c[s].getAttribute("name")&&!c[1].value.match(/\w{1,}@\w{1,}/gi)||""==c[s].value){i=!1;break}i?t("http://podlogkafood.ua-ix.biz/server/mail.php?action=send",a,function(t){"success"==t?document.querySelector("#formCart .notice_success").classList.add("active"):document.querySelector("#formCart .notice_error").classList.add("active")}):document.querySelector("#formCart .notice_warning").classList.add("active")})}.call(),function(){for(var t=document.getElementsByClassName("list-buy__name"),e=document.getElementsByClassName("form_buy"),n=function(n){t[n].addEventListener("click",function(){for(var o=t[n].parentNode.getAttribute("data-id-form"),r=0;t.length>r;r++)t[r].parentNode.classList.remove("active"),e[r].classList.remove("active"),e[r].getAttribute("id")==o&&e[r].classList.add("active");t[n].parentNode.classList.add("active")})},o=0;t.length>o;o++)n(o)}.call(),function(){for(var t=document.getElementsByClassName("nav__link"),e=document.getElementById("btn-burger_header"),n=0;t.length>n;n++)t[n].addEventListener("click",function(n){e.checked=!1;for(var o=0;t.length>o;o++)t[o].classList.remove("active");n.target.classList.add("active")});function o(t){var e=self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0,n=function(t){for(var e=document.getElementById(t),n=e.offsetTop,o=e;o.offsetParent&&o.offsetParent!=document.body;)n+=(o=o.offsetParent).offsetTop;return n}(t),o=n>e?n-e:e-n;if(o<100)scrollTo(0,n);else{var r=Math.round(o/100);r>=20&&(r=20);var a=Math.round(o/25),c=n>e?e+a:e-a,i=0;if(n>e)for(var s=e;s<n;s+=a)setTimeout("window.scrollTo(0, "+c+")",i*r),(c+=a)>n&&(c=n),i++;else for(s=e;s>n;s-=a)setTimeout("window.scrollTo(0, "+c+")",i*r),(c-=a)<n&&(c=n),i++}}for(var r=document.getElementById("nav-list_header").getElementsByClassName("nav__link"),a=0;r.length>a;a++)r[a].addEventListener("click",function(t){o(t.target.getAttribute("href").replace(/^#/,""))});document.getElementById("btn_bye").addEventListener("click",function(t){o("buy")})}.call();