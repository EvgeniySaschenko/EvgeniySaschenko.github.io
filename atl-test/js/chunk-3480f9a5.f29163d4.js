(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3480f9a5"],{"18ee":function(t,e,c){},"6b5d":function(t,e,c){"use strict";c("834b")},"7dde":function(t,e,c){},8055:function(t,e,c){"use strict";c("18ee")},"834b":function(t,e,c){},"9b00":function(t,e,c){"use strict";c("7dde")},b0c0:function(t,e,c){var n=c("83ab"),o=c("5e77").EXISTS,s=c("e330"),r=c("9bf2").f,i=Function.prototype,l=s(i.toString),a=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=s(a.exec),d="name";n&&!o&&r(i,d,{configurable:!0,get:function(){try{return u(a,l(this))[1]}catch(t){return""}}})},badd:function(t,e,c){"use strict";var n=c("7a23");function o(t,e,c,o,s,r){return Object(n["s"])(),Object(n["f"])("div",{class:Object(n["o"])("".concat(s.cls))},[Object(n["g"])("div",{class:Object(n["o"])("".concat(s.cls,"__box"))},[c.title?(Object(n["s"])(),Object(n["f"])("div",{key:0,class:Object(n["o"])("".concat(s.cls,"__title"))},Object(n["B"])(c.title),3)):Object(n["e"])("",!0),Object(n["g"])("div",{class:Object(n["o"])("".concat(s.cls,"__bottom-panel"))},[c.btnCancel?(Object(n["s"])(),Object(n["f"])("button",{key:0,class:Object(n["o"])("".concat(s.cls,"__btn-cancel")),onClick:e[0]||(e[0]=function(t){return r.emit("cancel")})},Object(n["B"])(c.btnCancel),3)):Object(n["e"])("",!0),c.btnConfirm?(Object(n["s"])(),Object(n["f"])("button",{key:1,class:Object(n["o"])("".concat(s.cls,"__btn-action")),onClick:e[1]||(e[1]=function(t){return r.emit("confirm")})},Object(n["B"])(c.btnConfirm),3)):Object(n["e"])("",!0)],2)],2)],2)}var s={name:"popup",data:function(){return{cls:"popup"}},props:{title:{type:String,default:""},btnCancel:{type:String,default:""},btnConfirm:{type:String,default:""}},methods:{emit:function(t){this.$emit("action",t)}}},r=(c("9b00"),c("6b0d")),i=c.n(r);const l=i()(s,[["render",o],["__scopeId","data-v-2e0f3459"]]);e["a"]=l},e6e2:function(t,e,c){"use strict";c.r(e);var n=c("7a23"),o=Object(n["g"])("h1",null,"Страница товара",-1),s=Object(n["h"])("Вернутся на страницу каталога");function r(t,e,c,r,i,l){var a=Object(n["z"])("router-link"),u=Object(n["z"])("form-field-add"),d=Object(n["z"])("product-properties");return Object(n["s"])(),Object(n["f"])("div",null,[o,Object(n["i"])(a,{to:"/"},{default:Object(n["G"])((function(){return[s]})),_:1}),Object(n["i"])(u,{product:l.product},null,8,["product"]),Object(n["i"])(d,{product:l.product},null,8,["product"])])}c("b0c0");function i(t,e,c,o,s,r){return Object(n["s"])(),Object(n["f"])("div",{class:Object(n["o"])("".concat(s.cls))},[Object(n["g"])("h3",{class:Object(n["o"])("".concat(s.cls,"__title"))},"Добавить новое поле",2),Object(n["g"])("div",{class:Object(n["o"])("".concat(s.cls,"__item"))},[Object(n["g"])("label",{class:Object(n["o"])("".concat(s.cls,"__label"))},"Название",2),Object(n["H"])(Object(n["g"])("input",{class:Object(n["o"])("".concat(s.cls,"__field")),type:"text","onUpdate:modelValue":e[0]||(e[0]=function(t){return s.name=t})},null,2),[[n["E"],s.name,void 0,{trim:!0}]])],2),Object(n["g"])("div",{class:Object(n["o"])("".concat(s.cls,"__item"))},[Object(n["g"])("label",{class:Object(n["o"])("".concat(s.cls,"__label"))},"Значение",2),Object(n["H"])(Object(n["g"])("input",{class:Object(n["o"])("".concat(s.cls,"__field")),type:"text","onUpdate:modelValue":e[1]||(e[1]=function(t){return s.value=t})},null,2),[[n["E"],s.value,void 0,{trim:!0}]])],2),s.error?(Object(n["s"])(),Object(n["f"])("div",{key:0,class:Object(n["o"])("".concat(s.cls,"__error error"))},Object(n["B"])(s.error),3)):Object(n["e"])("",!0),Object(n["g"])("button",{class:Object(n["o"])("".concat(s.cls,"__btn-add")),onClick:e[2]||(e[2]=function(t){return r.addCustomField()})},"Добавить поле",2)],2)}var l=c("ade3"),a={data:function(){return{cls:"form-field-add",name:"",value:"",error:""}},props:{product:{type:Object}},methods:{checkFieldsError:function(){var t=this.product,e=t.fields,c=t.fieldsCustom;return this.name&&this.value||(this.error="Заполните все поля"),(e[this.name]||c[this.name])&&(this.error="Поле с таким именем уже существует"),this.error},addCustomField:function(){this.error="",this.checkFieldsError()||(this.$store.commit("products/addCustomField",{productId:this.product.id,field:Object(l["a"])({},this.name,this.value)}),this.clearForm())},clearForm:function(){this.name="",this.value=""}}},u=(c("6b5d"),c("6b0d")),d=c.n(u);const b=d()(a,[["render",i]]);var j=b,O=Object(n["g"])("tr",null,[Object(n["g"])("th",null,"Название"),Object(n["g"])("th",null,"Редактировать значение"),Object(n["g"])("th",null,"Удалить")],-1),f=["type","onUpdate:modelValue"],p=Object(n["g"])("td",null,null,-1),h=["onUpdate:modelValue"],m=["onClick"];function v(t,e,c,o,s,r){var i=Object(n["z"])("popup");return Object(n["s"])(),Object(n["f"])("div",{class:Object(n["o"])("".concat(s.cls))},[Object(n["g"])("table",{class:Object(n["o"])("".concat(s.cls,"__table"))},[O,(Object(n["s"])(!0),Object(n["f"])(n["a"],null,Object(n["y"])(c.product.fields,(function(t,e){return Object(n["s"])(),Object(n["f"])("tr",{key:e},[Object(n["g"])("td",null,Object(n["B"])(e),1),Object(n["g"])("td",null,[Object(n["H"])(Object(n["g"])("input",{type:s.fieldsType[e]?s.fieldsType[e]:"text","onUpdate:modelValue":function(t){return s.state[e]=t}},null,8,f),[[n["D"],s.state[e]]])]),p])})),128)),(Object(n["s"])(!0),Object(n["f"])(n["a"],null,Object(n["y"])(c.product.fieldsCustom,(function(t,e){return Object(n["s"])(),Object(n["f"])("tr",{key:e},[Object(n["g"])("td",null,Object(n["B"])(e),1),Object(n["g"])("td",null,[Object(n["H"])(Object(n["g"])("input",{type:"text","onUpdate:modelValue":function(t){return s.state[e]=t}},null,8,h),[[n["E"],s.state[e]]])]),Object(n["g"])("td",null,[Object(n["g"])("button",{onClick:function(t){return s.keyFieldDelete=e}},"Удалить",8,m)])])})),128))],2),s.error?(Object(n["s"])(),Object(n["f"])("div",{key:0,class:Object(n["o"])("".concat(s.cls,"__error error"))},Object(n["B"])(s.error),3)):Object(n["e"])("",!0),Object(n["g"])("div",{class:Object(n["o"])("".concat(s.cls,"__bottom-panel"))},[Object(n["g"])("button",{class:Object(n["o"])("".concat(s.cls,"__bottom-panel-btn")),onClick:e[0]||(e[0]=function(t){return r.cancelChangesFields(s.stateSavedCurrent)})}," Отменить не сохранённые изменения ",2),Object(n["g"])("button",{class:Object(n["o"])("".concat(s.cls,"__bottom-panel-btn")),onClick:e[1]||(e[1]=function(t){return r.cancelChangesFieldsSave(s.stateSavedPrev)})}," Отменить последнее изменение ",2),Object(n["g"])("button",{class:Object(n["o"])("".concat(s.cls,"__bottom-panel-btn")),onClick:e[2]||(e[2]=function(t){return r.saveChangesFields(s.state)})}," Сохранить изменения ",2)],2),s.keyFieldDelete?(Object(n["s"])(),Object(n["d"])(i,{key:1,title:"Вы уверены что хотите удалить этото поле?",btnCancel:"Отмена",btnConfirm:"Удалить",onAction:e[3]||(e[3]=function(t){return r.processingConfirmDelete(t)})})):Object(n["e"])("",!0)],2)}var g=c("5530"),_=c("badd"),C={props:{product:{type:Object,default:function(){}}},data:function(){return{cls:"product-properties",fieldsType:{"Количество на складе":"number","Цена":"number"},state:{},stateSavedPrev:null,stateSavedCurrent:null,keyFieldDelete:null,error:""}},components:{Popup:_["a"]},watch:{product:{deep:!0,immediate:!0,handler:function(){this.setState(this.product),this.setStateSaved()}}},methods:{checkFieldsError:function(){var t=!1;for(var e in this.state)if(!this.state[e]){t=!0;break}return t},setState:function(t){var e=t.fields,c=t.fieldsCustom;this.state=Object(g["a"])(Object(g["a"])({},e),c)},cancelChangesFields:function(t){this.state=Object(g["a"])({},t)},cancelChangesFieldsSave:function(t){this.saveChangesFields(t)},saveChangesFields:function(t){this.checkFieldsError()?this.error="Поле не может быть пустым":this.$store.commit("products/saveChangesFields",{productId:this.product.id,fieldsAll:t})},deleteCustomField:function(t){this.$store.commit("products/deleteCustomField",{productId:this.product.id,fieldKey:t})},processingConfirmDelete:function(t){"confirm"==t&&this.deleteCustomField(this.keyFieldDelete),this.keyFieldDelete=null},setStateSaved:function(){this.error="",this.stateSavedCurrent?(this.stateSavedPrev=Object(g["a"])({},this.stateSavedCurrent),this.stateSavedCurrent=Object(g["a"])({},this.state)):(this.stateSavedPrev=Object(g["a"])({},this.state),this.stateSavedCurrent=Object(g["a"])({},this.state))}}};c("8055");const y=d()(C,[["render",v]]);var k=y,F={components:{FormFieldAdd:j,ProductProperties:k},computed:{product:function(){var t=this.$route.params.id,e=this.$store.state.products,c=e.itemsMap,n=e.items,o=c[t];return n[o]}}};const S=d()(F,[["render",r]]);e["default"]=S}}]);
//# sourceMappingURL=chunk-3480f9a5.f29163d4.js.map