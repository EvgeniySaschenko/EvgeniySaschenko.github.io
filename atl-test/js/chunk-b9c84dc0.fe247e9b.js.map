{"version":3,"sources":["webpack:///./src/views/product/form-field-add.vue?9cac","webpack:///./src/views/product/product-properties.vue?46fd","webpack:///./src/components/popup/popup.vue?5631","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/components/popup/popup.vue","webpack:///./src/components/popup/popup.vue?f4db","webpack:///./src/views/product/index.vue","webpack:///./src/views/product/form-field-add.vue","webpack:///./src/views/product/form-field-add.vue?3338","webpack:///./src/views/product/product-properties.vue","webpack:///./src/views/product/product-properties.vue?ec57","webpack:///./src/views/product/index.vue?c1fe"],"names":["DESCRIPTORS","FUNCTION_NAME_EXISTS","EXISTS","uncurryThis","defineProperty","f","FunctionPrototype","Function","prototype","functionToString","toString","nameRE","regExpExec","exec","NAME","configurable","get","this","error","class","cls","title","btnCancel","emit","btnConfirm","name","data","props","type","String","default","methods","typeAction","$emit","__exports__","render","to","product","value","addCustomField","Object","checkFieldsError","fields","fieldsCustom","$store","commit","productId","id","field","clearForm","key","fieldsType","state","keyFieldDelete","cancelChangesFields","stateSavedCurrent","cancelChangesFieldsSave","stateSavedPrev","saveChangesFields","processingConfirmDelete","$event","Цена","components","Popup","watch","deep","immediate","handler","setState","setStateSaved","isError","productData","fieldsAll","deleteCustomField","fieldKey","event","FormFieldAdd","ProductProperties","computed","$route","params","products","itemsMap","items","index"],"mappings":"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","file":"js/chunk-b9c84dc0.fe247e9b.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./form-field-add.vue?vue&type=style&index=0&id=3e465cda&lang=sass\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./product-properties.vue?vue&type=style&index=0&id=502dbf11&lang=sass\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./popup.vue?vue&type=style&index=0&id=2e0f3459&scoped=true&lang=sass\"","var DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar functionToString = uncurryThis(FunctionPrototype.toString);\nvar nameRE = /function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/;\nvar regExpExec = uncurryThis(nameRE.exec);\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return regExpExec(nameRE, functionToString(this))[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","<template>\n  <div :class=\"`${cls}`\">\n    <div :class=\"`${cls}__box`\">\n      <div v-if=\"title\" :class=\"`${cls}__title`\">{{ title }}</div>\n      <div :class=\"`${cls}__bottom-panel`\">\n        <button v-if=\"btnCancel\" :class=\"`${cls}__btn-cancel`\" @click=\"emit('cancel')\">\n          {{ btnCancel }}\n        </button>\n        <button v-if=\"btnConfirm\" :class=\"`${cls}__btn-action`\" @click=\"emit('confirm')\">\n          {{ btnConfirm }}\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"popup\",\n  data() {\n    return {\n      cls: \"popup\",\n    };\n  },\n  props: {\n    // Заголовок\n    title: {\n      type: String,\n      default: \"\",\n    },\n    // Текст кнопки Отмена\n    btnCancel: {\n      type: String,\n      default: \"\",\n    },\n    // Текст кнопки Подтверждения действия\n    btnConfirm: {\n      type: String,\n      default: \"\",\n    },\n  },\n  methods: {\n    // Создать событие Отмена / Подтверждения действия (по параметру typeAction можно будет определить какую кнопку нажал пользователь)\n    emit(typeAction) {\n      this.$emit(\"action\", typeAction);\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"sass\">\n.popup\n  position: fixed\n  top: 0\n  left: 0\n  right: 0\n  bottom: 0\n  z-index: 10\n  display: flex\n  justify-content: center\n  align-items: center\n  background-color: rgba(0, 0, 0, .5)\n  &__box\n    background-color: #fff\n    border: 1px solid #5F9EA0\n    padding: 10px\n    width: 300px\n  &__title\n    margin-bottom: 10px\n  &__bottom-panel\n    display: flex\n    justify-content: space-between\n</style>\n","import { render } from \"./popup.vue?vue&type=template&id=2e0f3459&scoped=true\"\nimport script from \"./popup.vue?vue&type=script&lang=js\"\nexport * from \"./popup.vue?vue&type=script&lang=js\"\n\nimport \"./popup.vue?vue&type=style&index=0&id=2e0f3459&scoped=true&lang=sass\"\n\nimport exportComponent from \"/media/e/Store/atl-test/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2e0f3459\"]])\n\nexport default __exports__","<template>\n  <div>\n    <h1>Страница товара</h1>\n    <router-link to=\"/\">Вернутся на страницу каталога</router-link>\n\n    <!--Добавить поле-->\n    <form-field-add :product=\"product\" />\n    <!--Список полей товара-->\n    <product-properties :product=\"product\" />\n  </div>\n</template>\n\n<script>\nimport FormFieldAdd from \"@/views/product/form-field-add.vue\";\nimport ProductProperties from \"@/views/product/product-properties.vue\";\n\nexport default {\n  components: {\n    FormFieldAdd,\n    ProductProperties,\n  },\n  computed: {\n    // Текущий товар\n    product() {\n      let { id } = this.$route.params;\n      let { itemsMap, items } = this.$store.state.products;\n      let index = itemsMap[id];\n      return items[index];\n    },\n  },\n};\n</script>\n","<template>\n  <div :class=\"`${cls}`\">\n    <h3 :class=\"`${cls}__title`\">Добавить новое поле</h3>\n    <!--Поля-->\n    <div :class=\"`${cls}__item`\">\n      <label :class=\"`${cls}__label`\">Название</label>\n      <input :class=\"`${cls}__field`\" type=\"text\" v-model.trim=\"name\" />\n    </div>\n    <div :class=\"`${cls}__item`\">\n      <label :class=\"`${cls}__label`\">Значение</label>\n      <input :class=\"`${cls}__field`\" type=\"text\" v-model.trim=\"value\" />\n    </div>\n    <!--Ошибка-->\n    <div v-if=\"error\" :class=\"`${cls}__error error`\">{{ error }}</div>\n    <!--Кнопка добавить-->\n    <button :class=\"`${cls}__btn-add`\" @click=\"addCustomField()\">Добавить поле</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      cls: \"form-field-add\",\n      // Название\n      name: \"\",\n      // Значение\n      value: \"\",\n      // Ошибка\n      error: \"\",\n    };\n  },\n  props: {\n    // id товара в который добаляем поле\n    product: {\n      type: Object,\n    },\n  },\n  methods: {\n    // Проверка полей\n    checkFieldsError() {\n      let { fields, fieldsCustom } = this.product;\n      // Если поле не заполнено\n      if (!this.name || !this.value) {\n        this.error = \"Заполните все поля\";\n      }\n      // Если такое поле уже существует\n      if (fields[this.name] || fieldsCustom[this.name]) {\n        this.error = \"Поле с таким именем уже существует\";\n      }\n      return this.error;\n    },\n    // Добавить дополнительное поле товару\n    addCustomField() {\n      this.error = \"\";\n      if (this.checkFieldsError()) {\n        return;\n      }\n      this.$store.commit(\"products/addCustomField\", {\n        productId: this.product.id,\n        field: { [this.name]: this.value },\n      });\n      this.clearForm();\n    },\n    // Очистка формы\n    clearForm() {\n      this.name = \"\";\n      this.value = \"\";\n    },\n  },\n};\n</script>\n\n<style lang=\"sass\">\n.form-field-add\n  margin-bottom: 10px\n  &__item\n    margin-bottom: 10px\n  &__label\n    margin-right: 10px\n</style>\n","import { render } from \"./form-field-add.vue?vue&type=template&id=3e465cda\"\nimport script from \"./form-field-add.vue?vue&type=script&lang=js\"\nexport * from \"./form-field-add.vue?vue&type=script&lang=js\"\n\nimport \"./form-field-add.vue?vue&type=style&index=0&id=3e465cda&lang=sass\"\n\nimport exportComponent from \"/media/e/Store/atl-test/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div :class=\"`${cls}`\">\n    <table :class=\"`${cls}__table`\">\n      <tr>\n        <th>Название</th>\n        <th>Редактировать значение</th>\n        <th>Удалить</th>\n      </tr>\n      <!--Основные поля-->\n      <tr v-for=\"(field, key) in product.fields\" :key=\"key\">\n        <td>{{ key }}</td>\n        <td><input :type=\"fieldsType[key] ? fieldsType[key] : 'text'\" v-model=\"state[key]\" /></td>\n        <td></td>\n      </tr>\n      <!--Кастомные поля-->\n      <tr v-for=\"(field, key) in product.fieldsCustom\" :key=\"key\">\n        <td>{{ key }}</td>\n        <td><input type=\"text\" v-model=\"state[key]\" /></td>\n        <td><button @click=\"keyFieldDelete = key\">Удалить</button></td>\n      </tr>\n    </table>\n    <!--Ошибка-->\n    <div v-if=\"error\" :class=\"`${cls}__error error`\">{{ error }}</div>\n    <!--Кнопки-->\n    <div :class=\"`${cls}__bottom-panel`\">\n      <button :class=\"`${cls}__bottom-panel-btn`\" @click=\"cancelChangesFields(stateSavedCurrent)\">\n        Отменить не сохранённые изменения\n      </button>\n      <button :class=\"`${cls}__bottom-panel-btn`\" @click=\"cancelChangesFieldsSave(stateSavedPrev)\">\n        Отменить последнее изменение\n      </button>\n      <button :class=\"`${cls}__bottom-panel-btn`\" @click=\"saveChangesFields(state)\">\n        Сохранить изменения\n      </button>\n    </div>\n    <!--Попап подтвердить удаление-->\n    <popup\n      v-if=\"keyFieldDelete\"\n      title=\"Вы уверены что хотите удалить этото поле?\"\n      btnCancel=\"Отмена\"\n      btnConfirm=\"Удалить\"\n      @action=\"processingConfirmDelete($event)\"\n    />\n  </div>\n</template>\n\n<script>\nimport Popup from \"@/components/popup/popup.vue\";\n\nexport default {\n  props: {\n    // Данные товара\n    product: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      cls: \"product-properties\",\n      // Типы полей отличные от text (для input)\n      fieldsType: {\n        \"Количество на складе\": \"number\",\n        Цена: \"number\",\n      },\n      // Состояние для того чтобы можно было менять v-model\n      state: {},\n      // Предыдущие сохранённое состояние (Шаг назад)\n      stateSavedPrev: null,\n      // Текущие сохранённое состояние (когда нажали кнопку сохранить)\n      stateSavedCurrent: null,\n      // Ключ поля которое необходимо удалить (если установлено не falsy значение, показать попап)\n      keyFieldDelete: null,\n      // Ошибка\n      error: \"\",\n    };\n  },\n  components: {\n    Popup,\n  },\n  watch: {\n    // Отслежываем изменения товара в store и меняем состояние компонента\n    product: {\n      deep: true,\n      immediate: true,\n      handler() {\n        this.setState(this.product);\n        this.setStateSaved();\n      },\n    },\n  },\n  methods: {\n    // Проверка полей\n    checkFieldsError() {\n      let isError = false;\n      for (let field in this.state) {\n        if (!this.state[field]) {\n          isError = true;\n          break;\n        }\n      }\n      return isError;\n    },\n    // Создать состояние\n    setState(productData) {\n      let { fields, fieldsCustom } = productData;\n      this.state = { ...fields, ...fieldsCustom };\n    },\n    // Отменить изменения не сохранённого состояния\n    cancelChangesFields(productData) {\n      //this.setState(productData);\n      this.state = { ...productData };\n    },\n    // Отменить изменения сохранённого состояния\n    cancelChangesFieldsSave(productData) {\n      // !productData - говорит о том что небыло сохранённых изменений\n      if (!productData) return;\n      this.saveChangesFields(productData);\n    },\n    // Сохранить изменения\n    saveChangesFields(productData) {\n      if (this.checkFieldsError()) {\n        this.error = \"Поле не может быть пустым\";\n        return;\n      }\n      this.$store.commit(\"products/saveChangesFields\", {\n        productId: this.product.id,\n        fieldsAll: productData,\n      });\n    },\n    // Удалить поле\n    deleteCustomField(key) {\n      this.$store.commit(\"products/deleteCustomField\", {\n        productId: this.product.id,\n        fieldKey: key,\n      });\n    },\n    // Обработка действия в Popup который запрашивает подтверждение на удаление\n    processingConfirmDelete(event) {\n      if (event == \"confirm\") {\n        this.deleteCustomField(this.keyFieldDelete);\n      }\n      this.keyFieldDelete = null;\n    },\n    // Сохранить передыдущие состояние (для того чтобы можно было вернутся на Шаг назад)\n    setStateSaved() {\n      this.error = \"\";\n      // Инициализация сохранённого состояния (1 раз)\n      if (!this.stateSavedCurrent) {\n        this.stateSavedPrev = null;\n        this.stateSavedCurrent = { ...this.state };\n      } else {\n        // При удалении / сохранении / добавлении\n        this.stateSavedPrev = { ...this.stateSavedCurrent };\n        this.stateSavedCurrent = { ...this.state };\n      }\n    },\n  },\n};\n</script>\n<style lang=\"sass\">\n.product-properties\n  &__table\n    margin-bottom: 10px\n  &__bottom-panel-btn\n    margin: 10px\n</style>\n","import { render } from \"./product-properties.vue?vue&type=template&id=502dbf11\"\nimport script from \"./product-properties.vue?vue&type=script&lang=js\"\nexport * from \"./product-properties.vue?vue&type=script&lang=js\"\n\nimport \"./product-properties.vue?vue&type=style&index=0&id=502dbf11&lang=sass\"\n\nimport exportComponent from \"/media/e/Store/atl-test/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./index.vue?vue&type=template&id=a483ccac\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/media/e/Store/atl-test/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}